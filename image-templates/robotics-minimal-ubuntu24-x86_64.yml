# Robotics AI Suite: Minimal ROS2 Image Template
# Ubuntu 24.04 LTS + ROS2 Jazzy (Core only)
#
# This is a minimal template with just ROS2 base - no nav2 stack
# Use this for testing basic ROS2 installation.

image:
  name: robotics-minimal-ubuntu24
  version: "24.04"

target:
  os: ubuntu
  dist: ubuntu24
  arch: x86_64
  imageType: raw

packageRepositories:
  # ROS2 Jazzy repository
  - codename: "noble"
    url: "http://packages.ros.org/ros2/ubuntu"
    pkey: "https://raw.githubusercontent.com/ros/rosdistro/master/ros.key"
    component: "main"

systemConfig:
  name: robotics-minimal
  description: Intel Robotics AI Suite - Minimal ROS2 Jazzy

  immutability:
    enabled: false

  packages:
    # Base system
    - ubuntu-minimal
    - systemd
    - systemd-resolved
    - systemd-boot
    - openssh-server
    - network-manager
    - sudo
    - curl
    - wget
    - git
    - vim
    - htop
    
    # Boot/initramfs (required for UKI)
    - dracut-core
    - cryptsetup-bin

    # Build essentials
    - build-essential
    - cmake
    - python3-pip
    - python3-venv
    - python3-colcon-common-extensions

    # ROS2 Jazzy Core ONLY
    - ros-jazzy-ros-base
    - ros-jazzy-rmw-cyclonedds-cpp

  kernel:
    version: "6.14"
    cmdline: "console=ttyS0,115200 console=tty0 loglevel=7"
    packages:
      - linux-image-generic-hwe-24.04

  configurations:
    # ROS2 environment setup
    - cmd: "echo 'source /opt/ros/jazzy/setup.bash' >> /etc/bash.bashrc"
    - cmd: "echo 'export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp' >> /etc/bash.bashrc"

  users:
    - name: robot
      password: robot
      groups:
        - sudo
        - dialout
